<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gamified Privacy</title>
    <link rel="stylesheet" href="styles.css">
    <script src="auth.js" defer></script>
</head>
<body>
    <div class="header">
        <div class="title">Gamified Privacy</div>
        <div class="avatar-container">
            <div class="avatar-display" id="avatarDisplay"></div>
            <div class="user-info" id="userInfo"></div>
        </div>
    </div>
    
    <div class="nav" id="navMenu">
        <a href="index.html">Home</a>
    </div>
    <div class="container">
        <div class="content-box">
            <h2>Gamified Privacy: Mastering NIST the Fun Way</h2>
            <p>A simplified, engaging way to understand the NIST Privacy Framework through small games, quizzes, and interactive tools.</p>
            <a href="#" class="button btn-blue" id="startLearningBtn">Start Learning Now</a>
        </div>

        <div class="pdf-box">
            <h3>NIST Privacy Framework PDF</h3>
            <a href="https://www.nist.gov/privacy-framework" target="_blank" id="downloadLink">Read more about NIST Framework!</a>
        </div>
    </div>

    <script>
        document.getElementById("startLearningBtn").addEventListener("click", function (event) {
            event.preventDefault();
            let currentUser = localStorage.getItem("currentUser");
        
            if (!currentUser) {
                window.location.href = "register.html";
            } else {
                let userData = JSON.parse(localStorage.getItem("userData")) || {};
                let selectedAvatar = userData[currentUser]?.avatar;
        
                if (!selectedAvatar) {
                    window.location.href = "avatar.html"; // Første gang -> avatarvalg
                } else {
                    window.location.href = "learning.html"; // Allerede valgt -> læring
                }
            }
        });
        </script>
        
<script>
    function updateNav() {
        const userInfo = document.getElementById("userInfo");
        let currentUser = localStorage.getItem("currentUser");
        let userData = JSON.parse(localStorage.getItem("userData")) || {};
        let selectedAvatar = userData[currentUser]?.avatar || "gray";

        if (currentUser) {
            userInfo.innerHTML = `
                <div class="avatar-circle" style="background-color: ${selectedAvatar}; width: 50px; height: 50px; border-radius: 50%;"></div>
                <span>${currentUser}</span>
            `;
        }
    }

    updateNav();
</script>

</body>
</html>
